<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端相关 | Mr哎呦喂的博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/assets/img/icon1.png">
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?e2bd54b8015cec977c6f30d0896b8a1b";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
      </script>
    <meta name="description" content="Mr哎呦喂的博客">
    
    <link rel="preload" href="/assets/css/0.styles.d76ef3c2.css" as="style"><link rel="preload" href="/assets/js/app.d1eacd34.js" as="script"><link rel="preload" href="/assets/js/2.078f83d0.js" as="script"><link rel="preload" href="/assets/js/22.e783c062.js" as="script"><link rel="prefetch" href="/assets/js/10.7b6e095e.js"><link rel="prefetch" href="/assets/js/11.dfc4f24c.js"><link rel="prefetch" href="/assets/js/12.10892ebb.js"><link rel="prefetch" href="/assets/js/13.f3db9d85.js"><link rel="prefetch" href="/assets/js/14.d4d210bf.js"><link rel="prefetch" href="/assets/js/15.aae93beb.js"><link rel="prefetch" href="/assets/js/16.5c9f755a.js"><link rel="prefetch" href="/assets/js/17.ae4d6944.js"><link rel="prefetch" href="/assets/js/18.79e5f09c.js"><link rel="prefetch" href="/assets/js/19.1f6b5ef8.js"><link rel="prefetch" href="/assets/js/20.8e4d0e8b.js"><link rel="prefetch" href="/assets/js/21.e37db4ae.js"><link rel="prefetch" href="/assets/js/23.35fdaaa4.js"><link rel="prefetch" href="/assets/js/24.8729820d.js"><link rel="prefetch" href="/assets/js/25.bb3b6083.js"><link rel="prefetch" href="/assets/js/26.5c7fc8ea.js"><link rel="prefetch" href="/assets/js/27.0994d122.js"><link rel="prefetch" href="/assets/js/28.e8b14745.js"><link rel="prefetch" href="/assets/js/29.736cd52a.js"><link rel="prefetch" href="/assets/js/3.ec3d838b.js"><link rel="prefetch" href="/assets/js/30.0285e14d.js"><link rel="prefetch" href="/assets/js/31.42e1153b.js"><link rel="prefetch" href="/assets/js/32.040dc90b.js"><link rel="prefetch" href="/assets/js/33.c88f2ab5.js"><link rel="prefetch" href="/assets/js/34.cc5bd530.js"><link rel="prefetch" href="/assets/js/35.ab6f524e.js"><link rel="prefetch" href="/assets/js/36.517b4795.js"><link rel="prefetch" href="/assets/js/37.e49f1e63.js"><link rel="prefetch" href="/assets/js/38.1aa0a599.js"><link rel="prefetch" href="/assets/js/39.47ef1597.js"><link rel="prefetch" href="/assets/js/4.40fa117c.js"><link rel="prefetch" href="/assets/js/40.3e5180e6.js"><link rel="prefetch" href="/assets/js/41.bc79f4a3.js"><link rel="prefetch" href="/assets/js/42.f3a605f6.js"><link rel="prefetch" href="/assets/js/43.9def239b.js"><link rel="prefetch" href="/assets/js/44.89cca326.js"><link rel="prefetch" href="/assets/js/45.c573faab.js"><link rel="prefetch" href="/assets/js/46.1bc1fbd2.js"><link rel="prefetch" href="/assets/js/5.9765b740.js"><link rel="prefetch" href="/assets/js/6.e30e425a.js"><link rel="prefetch" href="/assets/js/7.99f5468d.js"><link rel="prefetch" href="/assets/js/8.8666aa59.js"><link rel="prefetch" href="/assets/js/9.0369ab2d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d76ef3c2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/hero.png" alt="Mr哎呦喂的博客" class="logo"> <span class="site-name can-hide">Mr哎呦喂的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/myself/" class="nav-link">
  关于我
</a></div><div class="nav-item"><a href="/lifeExperience/" class="nav-link">
  人生心得
</a></div><div class="nav-item"><a href="/website/" class="nav-link">
  网址导航
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术文档" class="dropdown-title"><span class="title">技术文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术文档" class="mobile-dropdown-title"><span class="title">技术文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/JS/" class="nav-link">
  基础使用
</a></li><li class="dropdown-subitem"><a href="/browser/" class="nav-link">
  浏览器
</a></li></ul></li><li class="dropdown-item"><h4>
          vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/ssr/" class="nav-link">
  ssr
</a></li></ul></li><li class="dropdown-item"><h4>
          面试题
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/interview/interviewText.html" class="nav-link">
  理论面试题
</a></li><li class="dropdown-subitem"><a href="/interview/interviewMath.html" class="nav-link">
  实战面试题
</a></li></ul></li><li class="dropdown-item"><h4>
          其他知识
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/knowledge/mobileAPP/" class="nav-link">
  移动端
</a></li><li class="dropdown-subitem"><a href="/typeScript/" class="nav-link">
  typeScript
</a></li><li class="dropdown-subitem"><a href="/cola/" class="nav-link">
  日记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他知识" class="dropdown-title"><span class="title">其他知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他知识" class="mobile-dropdown-title"><span class="title">其他知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/camera.html" class="nav-link">
  相机
</a></li><li class="dropdown-item"><!----> <a href="/other/fabric.html" class="nav-link">
  面料
</a></li><li class="dropdown-item"><!----> <a href="/other/yueyu.html" class="nav-link">
  粤语
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/myself/" class="nav-link">
  关于我
</a></div><div class="nav-item"><a href="/lifeExperience/" class="nav-link">
  人生心得
</a></div><div class="nav-item"><a href="/website/" class="nav-link">
  网址导航
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术文档" class="dropdown-title"><span class="title">技术文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术文档" class="mobile-dropdown-title"><span class="title">技术文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/JS/" class="nav-link">
  基础使用
</a></li><li class="dropdown-subitem"><a href="/browser/" class="nav-link">
  浏览器
</a></li></ul></li><li class="dropdown-item"><h4>
          vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/ssr/" class="nav-link">
  ssr
</a></li></ul></li><li class="dropdown-item"><h4>
          面试题
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/interview/interviewText.html" class="nav-link">
  理论面试题
</a></li><li class="dropdown-subitem"><a href="/interview/interviewMath.html" class="nav-link">
  实战面试题
</a></li></ul></li><li class="dropdown-item"><h4>
          其他知识
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/knowledge/mobileAPP/" class="nav-link">
  移动端
</a></li><li class="dropdown-subitem"><a href="/typeScript/" class="nav-link">
  typeScript
</a></li><li class="dropdown-subitem"><a href="/cola/" class="nav-link">
  日记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他知识" class="dropdown-title"><span class="title">其他知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他知识" class="mobile-dropdown-title"><span class="title">其他知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/camera.html" class="nav-link">
  相机
</a></li><li class="dropdown-item"><!----> <a href="/other/fabric.html" class="nav-link">
  面料
</a></li><li class="dropdown-item"><!----> <a href="/other/yueyu.html" class="nav-link">
  粤语
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/knowledge/littleKnowledge.html" aria-current="page" class="active sidebar-link">前端相关</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge/littleKnowledge.html#冷门小知识" class="sidebar-link">冷门小知识</a></li><li class="sidebar-sub-header"><a href="/knowledge/littleKnowledge.html#错误捕获" class="sidebar-link">错误捕获</a></li></ul></li><li><a href="/knowledge/vscode.html" class="sidebar-link">vscode相关知识</a></li><li><a href="/knowledge/mobileAPP.html" class="sidebar-link">移动端开发</a></li><li><a href="/knowledge/webpack.html" class="sidebar-link">webpack</a></li><li><a href="/knowledge/other.html" class="sidebar-link">其他知识</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="前端相关"><a href="#前端相关" class="header-anchor">#</a> 前端相关</h1> <h2 id="冷门小知识"><a href="#冷门小知识" class="header-anchor">#</a> 冷门小知识</h2> <ol><li>arr.forEach()有第二个参数，是用来改变this指向的</li></ol> <h2 id="错误捕获"><a href="#错误捕获" class="header-anchor">#</a> 错误捕获</h2> <ol><li><strong>try-catch 语句</strong><br>
JavaScript 中处理异常的一种标准方式</li></ol> <ul><li>基础使用</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>try {
  // 可能会导致错误的代码
} catch (error) {
  // 在错误发生时怎么处理
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><p>如果 try 块中的任何代码发生了错误，就会立即退出代码执行过程，然后执行 catch 块。此时 catch 块会接收到一个包含错误信息的对象，这个对象中包含的信息因浏览器而异，但共同的是有一个保存着错误信息的 message 属性。</p></li> <li><p>finally 子句在 try-catch 语句中是可选的，但是 finally 子句一经使用，其代码无论如何都会执行。只要代码中包含 finally 子句，则无论 try 或 catch 语句中包含什么代码——甚至是 return 语句，都不会阻止 finally 子句执行。</p></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>function testFinally {
  try {
    return &quot;出去玩&quot;;
  } catch (error) {
    return &quot;看电视&quot;;
  } finally {
    return &quot;做作业&quot;;
  }
  return &quot;睡觉&quot;;
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>表面上调用这个函数会返回 &quot;出去玩&quot;，因为返回 &quot;出去玩&quot; 的语句位于 try 语句块中，而执行此语句又不会出错。<br>
实际上返回 &quot;做作业&quot;，因为最后还有 finally 子句，结果就会导致 try 块里的 return 语句被忽略，也就是说调用的结果只能返回 &quot;做作业&quot;。<br>
如果把 finally 语句拿掉，这个函数将返回 &quot;出去玩&quot;。<br>
因此，在使用 finally 子句之前，一定要非常清楚你想让代码怎么样。（思考一下如果 catch 块和 finally 块都抛出异常，catch 块的异常是否能抛出）</p> <ul><li>try-catch 无法处理异步代码和一些其他场景</li></ul> <ol start="2"><li><strong>window.onerror</strong></li></ol> <ul><li>当 JS 运行时错误发生时，window 会触发一个 ErrorEvent 接口的 error 事件，并执行window.onerror()。</li> <li>在JS代码前面加入这个函数，即可捕捉到JS执行错误的详细信息</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>window.onerror = function (message, source, lineno, colno, error) {
  console.log(&quot;捕获到异常：&quot;, { message, source, lineno, colno, error });
};

/*
message 错误提示信息   
source 错误文件在硬盘的位置    
lineno 错误代码所在行数     
error 错误信息+位置 
*/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>同步错误可以捕获到，但是，window.error 无法捕获静态资源异常和 JS 代码错误</strong></p> <ol start="3"><li><strong>静态资源加载异常</strong></li></ol> <ul><li>onerror 来捕获</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;script&gt;  
function errorHandler(error) {
    console.log(&quot;捕获到静态资源加载异常&quot;, error);
  }
&lt;/script&gt;

&lt;script src=&quot;http://cdn.xxx.com/js/test.js&quot; onerror=&quot;errorHandler(this)&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;http://cdn.xxx.com/styles/test.css&quot; onerror=&quot;errorHandler(this)&quot;&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>这样可以拿到静态资源的错误，但缺点很明显，代码的侵入性太强了，每一个静态资源标签都要加上 onerror 方法。</p> <ul><li>addEventListener(&quot;error&quot;)</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;script&gt; 
window.addEventListener('error', (error) =&gt; {
    console.log('捕获到异常：', error);
}, true)
&lt;/script&gt;

&lt;img src=&quot;https://itemcdn.zcycdn.com/15af41ec-e6cb-4478-8fad-1a47402f0f25.png&quot;&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>由于网络请求异常不会事件冒泡，因此必须在捕获阶段将其捕捉到才行，但是这种方式虽然可以捕捉到网络请求的异常，但是无法判断 HTTP 的状态是 404 还是其他比如 500 等等，所以还需要配合服务端日志才进行排查分析才可以。</p> <ol start="4"><li><strong>promise异常</strong></li></ol> <blockquote><p>Promise 中的异常不能被 try-catch 和 window.onerror 捕获，这时候我们就需要监听 unhandledrejection 来帮我们捕获这部分错误。</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>    window.addEventListener(&quot;unhandledrejection&quot;, function (e) {
        e.preventDefault();
        console.log(&quot;捕获到 promise 错误了&quot;);
        console.log(&quot;错误的原因是&quot;, e.reason);
        console.log(&quot;Promise 对象是&quot;, e.promise);
        return true;
    });


    Promise.reject(&quot;promise error&quot;);
    new Promise((resolve, reject) =&gt; {
        reject(&quot;promise error&quot;);
    });
    new Promise((resolve) =&gt; {
        resolve();
    }).then(() =&gt; {
        throw &quot;promise error&quot;;
    });

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ol start="5"><li>Vue 异常</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>Vue.config.errorHandler = (err, vm, info) =&gt; {
  console.error(&quot;通过vue errorHandler捕获的错误&quot;);
  console.error(err);
  console.error(vm);
  console.error(info);
};
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="6"><li>axios请求异常<br>
就需要我们常用的请求拦截来统一处理错误码了</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>axios.interceptors.response.use(
  function (response) {
    //任何超出2xx范围的状态代码都会触发此功能
    //处理响应错误
  },
  function (error) {
    if (error.response.status === 401) {
      goLogin(); // 跳转登录页
    } else if (error.response.status === 502) {
      alert(error.response.data.message || &quot;系统升级中，请稍后重试&quot;);
    }
    return Promise.reject(error.response);
  }
);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ol start="7"><li>小结</li></ol> <blockquote><p>异常一共七大类，处理时需分清是致命错误还是非致命错误。</p></blockquote> <ul><li>可疑区域增加 try-catch</li> <li>全局监控 JS 异常 window.onerror</li> <li>全局监控静态资源异常 window.addEventListener</li> <li>捕获没有 catch 的 Promise 异常用 unhandledrejection</li> <li>Vue errorHandler 和 React componentDidCatch</li> <li>Axios 请求统一异常处理用拦截器 interceptors</li> <li>使用日志监控服务收集用户错误信息</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/knowledge/vscode.html">
        vscode相关知识
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d1eacd34.js" defer></script><script src="/assets/js/2.078f83d0.js" defer></script><script src="/assets/js/22.e783c062.js" defer></script>
  </body>
</html>
